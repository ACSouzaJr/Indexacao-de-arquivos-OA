\documentclass[a4paper]{article}

%% Language and font encodings
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
%--------------------------------------
 
%Portuguese-specific commands
%--------------------------------------
\usepackage[portuguese]{babel}
%--------------------------------------
 
%Hyphenation rules
%--------------------------------------
\usepackage{hyphenat}
\hyphenation{mate-mática recu-perar}

%% Sets page size and margins
\usepackage[a4paper,top=3cm,bottom=2cm,left=3cm,right=3cm,marginparwidth=1.75cm]{geometry}

%% Useful packages
\usepackage{amsmath}
\usepackage{graphicx}
\usepackage[colorinlistoftodos]{todonotes}
\usepackage[colorlinks=true, allcolors=blue]{hyperref}

\title{Trabalho 1 - Organização de Arquivos}

%%\subtitle{Indexação de Arquivos e utilização de técnicas com Lista Invertida}

\author{Yan Pietro Barcellos Galli e Antônio Carlos}

\begin{document}
\maketitle

\begin{abstract}

O objetivo desse trabalho consiste em concretizar os conhecimentos teóricos adquiridos em sala de aula sobre a indexação de arquivos. Dados alguns arquivos externos, um programa deve ser criado, devendo ser capaz de ler tais arquivos para gerar um arquivo de índices primário e dois arquivos de índice secundários, de modo que os arquivos de índices secundários deverão ser criados utilizando como princípio a técnica de listas invertidas encadeadas. O programa deverá também ser capaz de incluir, excluir e atualizar registros, mantendo sempre os arquivos de índices ordenados e reutilizando adequadamente os espaços inutilizados.

\end{abstract}

\section{Introdução}

\subsection{Leitura e impressão de dados}

O método de indexação é um método de ordenação de arquivos com o uso de chaves. Para que isso ocorra, é utilizado um índice para cada tipo de chave de acesso, de modo que esses índices possuam registros de tamanho fixado. Torna-se possível, então, realizar buscas binárias no arquivo de índices, tanto para registros de tamanho fixo quanto para registros de tamanho variável, utilizando suas posições ou números relativos de registro(PRR e NRR). Dessa maneira, o acesso ao arquivo de dados passa a ser direto, enquanto a leitura no arquivo de índices é sequencial. A busca pelos registros no arquivo de dados é feita pela ordem das  
chaves.

Esses arquivos de índices possuem apenas registros de tamanho fixo, de modo que cada um desses registros é dividivo em dois campos também de tamanho fixo: campo de armazenamento da chave e campo de armazenamento de referência, com byte offset. Para cada registro no arquivo de dados existe um registro no arquivo de índices. Dessa maneira, o arquivo de índices é muito mais simples de ser manipulado que o arquivo de dados, por ter tamanho menor e armazenar apenas registros de tamanho fixo. 

Nos arquivos de índice simples com inserção temporal, os registros são inseridos no arquivo de dados de maneira temporal. A cada inclusão de registros no arquivo de dados, deve ser incluída a dupla <chave><referência> no arquivo de índices, de maneira ordenada. A cada remoção de registros, sua respectiva entrada no arquivo de índices também deve ser removida. A cada atualização de registros, a posição da chave no registro deve ser encontrada no arquivo de índices, o byte offset do registro correspondente no arquivo de dados deve ser calculado e só então o registro deve ser movido até seu devido lugar.

\subsection{Criar arquivos de índices e arquivos de dados}

Ao criar os arquivos de índices e o arquivo de dados, eles devem inicialmente ser iniciados como vazios, para que depois possam ser inseridos sesu correspondentes dados para serem manipulados.

\subsection{Regravar arquivos de Índice após o uso}

Essa operação é realizada apenas quando o vetor INDEX[] é alterado. O programa deve ser capaz de detectar quando o INDEX[] foi alterado, e para isso uma FLAG é utilizada. Essa FLAG é gravada no registro cabeçalho do arquivo de índices e é limpa toda vez que o arquivo é corretamente reescrito.

Todos as operações do módulo devem verificar se essa FLAG está setada para true antes de serem executados, pois se ela estiver ligada, que dizer que o vetor INDEX[] foi modificado e ainda não foi devidamente atualizado, tornando necessária uma imediata atualização da mesma para que o programa continue.

A reconstrução dos arquivos de índice deve ocorrer de maneira continua conforme o programa é executado, de modo que ocorra antes de todo e qualquer acesso ao arquivo de índices.

%%Utilizar um arquivo auxiliar para regravar o arquivo de índice

\subsection{Inclusão de registros}

Esse processo é realizado em duas partes, uma de inclusão do registro e outra de atualização dos arquivos de índice. 

A inclusão do registro no arquivo de dados ocorre por meio da PRR do registro, utilizando informações de seu byte offset, que o aloca em algum espaço livre. Se não houver espaços livres pelo arquivo, ele será alocado ao final do arquivo. A LED deve ser atualizada após a inserção do registro no arquivo de dados.

Depois desse processo, como um registro foi adicionado ao arquivo de dados, torna-se necessário atualizar o arquivo de índices. Sua chave e sua PRR devem ser informadas, e a FLAG de atualização do arquivo de índices deve ser desligada, pois o arquivo de índices foi devidamente atualizado.

Essa inclusão deve ser realizada tanto para os arquivos de índices primários, quanto para os arquivos de índices secundários. Ao armazenar registros nos arquivos de índices secundários, a chave deve ser armazenada em sua forma canônica e em registro de tamanho fixo. Essas chaves sempre estão agrupadas, e devem estar ordenadas pela suas respectivas chaves primárias.

\subsection{Exclusão de registros}

Quando um registro de arquivos é eliminado, a LED deve ser atualizada para que o espaço que foi eliminado possa ser reutilizado. Além disso, seus dados nos arquivos de índices devem ser também eliminados, o que torna necessária uma nova atualização do arquivo de índices. Quando ele for devidamente atualizado, a FLAG deve ser desligada, permitindo a continuação das funcionalidades do programa.

Ao eliminar um registro do arquivo, apenas sua referência no arquivo de índices primário é eliminada, sem alterar os arquivos de índices secundários. Isso ocorre devido ao fato dos índices secundários estarem diretamente relacionados aos índices primários. Dessa maneira, os índices secundários não precisam ser atualizados.

Como esses registros excluídos ocupam espaço nos arquivos de índices secundários, quando muitas exclusões forem feitas, o arquivo deve ser limpado DA SEGUINTE MANEIRA*: 

\subsection{Atualizar registros}

Para atualizar registros, deve-se considerar se a chave primária foi alterada ou não. 

Para o caso da chave primária não ter sido alterada, se a alteração couber no registro atual, não é necessário atualizar o arquivo de índices, pois o registro parmanece com a mesma chave e com a mesma referência. Mas se por outro lado o registro não couber no mesmo espaço em que estava, ele deverá ser movido para um registro que possua espaço suficiente para ele poder ser realocado. Nesse caso, como sua referência mudou, o registro em que estava deve ser adicionado à LED, o registro novo em que foi alocado deve ser atualizado no arquivo de índices, sua PRR deve ser atualizada e a FLAG de atualização do arquivo de índices deve ser desligada. 

Como a chave primária não foi alterada, apenas os arquivos de índices secundários devem ser reordenados. 


No caso da chave primária ter sido alterada, além de seu arquivo de índices primário ter que ser reordenado, é necessário também reordenar os arquivos de índices secundários. Para casos em que o campo não couber no espaço atual do registro variável, a atualização deve ser tratada como uma eliminação seguida de uma inclusão no arquivo de dados, tornando-se necessária uma alteração da PRR no arquivo de índices primário. Ao final da atualização, o arquivo de índices  deve ser atualizado, a a FLAG deve ser desligada.

\section{Materiais e Métodos}

\section{Resultados}

\subsection{How to include Figures}

First you have to upload the image file from your computer using the upload link the project menu. Then use the includegraphics command to include it in your document. Use the figure environment and the caption command to add a number and a caption to your figure. See the code for Figure \ref{fig:frog} in this section for an example.

\begin{figure}
\centering
\includegraphics[width=0.3\textwidth]{frog.jpg}
\caption{\label{fig:frog}This frog was uploaded via the project menu.}
\end{figure}

\subsection{How to add Comments}

Comments can be added to your project by clicking on the comment icon in the toolbar above. % * <john.hammersley@gmail.com> 2016-07-03T09:54:16.211Z:
%
% Here's an example comment!
%
To reply to a comment, simply click the reply button in the lower right corner of the comment, and you can close them when you're done.

Comments can also be added to the margins of the compiled PDF using the todo command\todo{Here's a comment in the margin!}, as shown in the example on the right. You can also add inline comments:

\todo[inline, color=green!40]{This is an inline comment.}

\subsection{How to add Tables}

Use the table and tabular commands for basic tables --- see Table~\ref{tab:widgets}, for example. 

\begin{table}
\centering
\begin{tabular}{l|r}
Item & Quantity \\\hline
Widgets & 42 \\
Gadgets & 13
\end{tabular}
\caption{\label{tab:widgets}An example table.}
\end{table}

\subsection{How to write Mathematics}

\LaTeX{} is great at typesetting mathematics. Let $X_1, X_2, \ldots, X_n$ be a sequence of independent and identically distributed random variables with $\text{E}[X_i] = \mu$ and $\text{Var}[X_i] = \sigma^2 < \infty$, and let
\[S_n = \frac{X_1 + X_2 + \cdots + X_n}{n}
      = \frac{1}{n}\sum_{i}^{n} X_i\]
denote their mean. Then as $n$ approaches infinity, the random variables $\sqrt{n}(S_n - \mu)$ converge in distribution to a normal $\mathcal{N}(0, \sigma^2)$.


\subsection{How to create Sections and Subsections}

Use section and subsections to organize your document. Simply use the section and subsection buttons in the toolbar to create them, and we'll handle all the formatting and numbering automatically.

\subsection{How to add Lists}

You can make lists with automatic numbering \dots

\begin{enumerate}
\item Like this,
\item and like this.
\end{enumerate}
\dots or bullet points \dots
\begin{itemize}
\item Like this,
\item and like this.
\end{itemize}

\subsection{How to add Citations and a References List}

You can upload a \verb|.bib| file containing your BibTeX entries, created with JabRef; or import your \href{https://www.overleaf.com/blog/184}{Mendeley}, CiteULike or Zotero library as a \verb|.bib| file. You can then cite entries from it, like this: \cite{greenwade93}. Just remember to specify a bibliography style, as well as the filename of the \verb|.bib|.

You can find a \href{https://www.overleaf.com/help/97-how-to-include-a-bibliography-using-bibtex}{video tutorial here} to learn more about BibTeX.

We hope you find Overleaf useful, and please let us know if you have any feedback using the help menu above --- or use the contact form at \url{https://www.overleaf.com/contact}!

\bibliographystyle{alpha}
\bibliography{sample}

\end{document}
